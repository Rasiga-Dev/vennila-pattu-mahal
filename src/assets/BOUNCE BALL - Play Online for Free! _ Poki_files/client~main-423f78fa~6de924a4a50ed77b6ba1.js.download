try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="61b9e0fa-b59b-4e6f-90d3-1a6a9c726af6",e._sentryDebugIdIdentifier="sentry-dbid-61b9e0fa-b59b-4e6f-90d3-1a6a9c726af6")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"9cbac7ae26bc931e29ae66af5616acaae6d35ef5"};(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9786],{34524:(e,a,t)=>{t.d(a,{$E:()=>Z,$i:()=>M,Ay:()=>W,Fw:()=>F,GE:()=>j,HH:()=>D,I2:()=>Y,Lz:()=>x,MS:()=>V,Q5:()=>E,QB:()=>v,XB:()=>P,XZ:()=>A,eb:()=>C,i$:()=>B,i8:()=>O,iM:()=>H,j5:()=>R,jO:()=>G,jp:()=>I,mY:()=>T,nj:()=>K,o3:()=>k,oP:()=>N,sF:()=>_,th:()=>z,wt:()=>L});var o=t(20038),s=t(25508),n=t(48554),i=t(42891),d=t(5298),c=t(91323),r=t(11436),l=t(53210),u=t(15049),p=t(89385),f=t(17782),m=t(73421),g=t(16345),y=t(28933),b=t(83569),h=t(35190);let w;try{navigator?.cookieDeprecationLabel&&navigator.cookieDeprecationLabel.getValue().then((e=>{w=e}))}catch{}const S=(0,o.Z0)({name:"ads",initialState:{takeover:null,pokiSDKLoaded:!1,adStackLoaded:!1,adStackReadyForLoad:!1,adBlocked:!1,mobileAdsOpportunity:!1,gameBarHouseAdCount:0,gameBarHouseAdEmpty:!1},reducers:{pokiSDKLoaded:e=>{e.pokiSDKLoaded=!0},adStackLoaded:e=>{e.adStackLoaded=!0},adBlocked:e=>{e.adBlocked=!0},startImmersiveTakeover:(e,a)=>{e.takeover=a.payload.takeover},stopImmersiveTakeover:e=>{e.takeover=null},setMobileAdsOpportunity:(e,a)=>{e.mobileAdsOpportunity=a.payload.allowed},countGameBarHouseAd:(e,a)=>{e.gameBarHouseAdEmpty=a.payload.isEmpty,e.gameBarHouseAdCount+=a.payload.isEmpty?0:1}},extraReducers:e=>{e.addCase(n.Br,(e=>{e.adStackReadyForLoad=!0,e.gameBarHouseAdCount=0,e.gameBarHouseAdEmpty=!1}))}}),_=(0,o.VP)("ads/refresh_display_ads"),k=(0,f.A)("ads/display_ad"),A=(0,f.A)("ads/refresh_ad"),v=(0,f.A)("ads/destory_ad_slot"),L=(0,o.VP)("ads/force_stop_ad_refresh"),B=(0,o.VP)("ads/cleanup_companion_ad"),{pokiSDKLoaded:P,adStackLoaded:D,adBlocked:E,startImmersiveTakeover:G,stopImmersiveTakeover:I,setMobileAdsOpportunity:C,countGameBarHouseAd:N}=S.actions,O=(0,s.Mz)(i.Kk,u.dR,u.lb,((e,a,t)=>{if("undefined"!=typeof window){const e=new URL(window?.location?.toString())?.searchParams?.get("force_ay_mode")||h.G8.NOT_APPLICABLE;if([h.G8.DISABLED,h.G8.PBS_ONLY,h.G8.DPF_ONLY,h.G8.CSTS_ONLY,h.G8.PBS_DPF_CSTS,h.G8.ON].includes(e))return console.warn("AY mode set by URL parameter:",e),e}return t||!a?h.G8.NOT_APPLICABLE:e>=4&&e<8?h.G8.PBS_ONLY:e>=8&&e<12?h.G8.DPF_ONLY:e>=12&&e<16?h.G8.DISABLED:h.G8.ON})),F=(0,s.Mz)(O,i.wu,((e,a)=>(0,y.J)(e,a))),M=(0,s.Mz)(r.m_,c.Gd,d.Vv,l.p,i.H6,O,p.Ep,((e,a,t,o,s,n,i)=>{const d={tag:"pg-v9cbac7ae26bc931e29ae66af5616acaae6d35ef5",ab:Math.floor(100*Math.random()).toString(),experiment:o,page_has_mpu:"no",page_has_skyscraper:"no",page_has_lead:"no",cookieDepL:w,site_id:a.id,ay_mode:n,is_logged_in:i};if(t&&(d["game-id"]=t.id,d.categories=(t.categories||[]).map((({id:e})=>e)),o&&(d.expid_content_gameid=`${o}|${t.id}`)),e&&(d.debug=e),!s){let e=3;const a=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),t=Object.keys(m.xu);for(let o=0;o<t.length;o++){const s=Number(t[o]),n=m.xu[s]||0,i=m.xu[Number(t[o+1])]||1/0;if(a>=n&&a<=i){e=s;break}}d.page_has_lead="yes",e>=12&&(d.page_has_mpu="yes"),[9,11,17].includes(e)&&(d.page_has_skyscraper="yes")}return d}));function H(e){return e.ads.takeover}function x(e){return e.ads.pokiSDKLoaded}function R(e){return e.ads.adStackLoaded}function T(e){return e.ads.gameBarHouseAdCount}function V(e){return e.ads.gameBarHouseAdEmpty}const K=e=>e.ads.adBlocked,U=(0,s.Mz)(i.H6,(e=>e.ads.adStackReadyForLoad),((e,a)=>!e||a));function j(e){return e.ads.mobileAdsOpportunity}const z=(0,s.Mz)(x,i.Wv,U,c.DF,((e,a,t,o)=>{(0,b.K)("selectAdStackReady:inputs",{sdkLoaded:e,consentSettled:a,adStackStartMoment:t});const s=e&&a&&t&&o!==c.LJ.CAR;return(0,b.K)("selectAdStackReady:result",{result:s}),s})),Z=(0,s.Mz)(d.Vv,(e=>{const a=[];return e?.categories&&e.categories.forEach((e=>{e.iabCategories&&e.iabCategories.split(",").forEach((e=>{a.includes(e)||a.push(e)}))})),a.sort(),a})),Y=(0,s.Mz)(d.Vv,c.Gd,((e,a)=>{const t=(0,g.A)(),o=3===a.id?"Poki":a.domain_title;return{site:{name:o,domain:window.location.hostname,page:window.location.href,privacypolicy:1,publisher:{name:o,domain:a.domain},content:e?{id:`${e.id}`,title:e.title,url:window.location.href,sourcerelationship:1}:{}},device:{w:t.width,h:t.height}}})),W=S},89385:(e,a,t)=>{t.d(a,{Ay:()=>x,Bp:()=>M,C4:()=>L,Cf:()=>G,Ep:()=>w,Fh:()=>_,Gf:()=>O,Gw:()=>S,IT:()=>y,PZ:()=>B,QF:()=>b,V1:()=>E,Z:()=>k,bW:()=>F,hK:()=>C,iJ:()=>g,ij:()=>h,jv:()=>v,qb:()=>N,qf:()=>D,vJ:()=>A});var o=t(25508),s=t(20038),n=t(10179),i=t(88800),d=t(42891),c=t(40620),r=t(98708),l=t(11436),u=t(16536),p=t(46493),f=t(52694),m=t(23038);const g=e=>e.account.status,y=e=>e.account.session,b=e=>e.account.flow,h=e=>e.account.isPanelVisible,w=e=>200===e.account.status,S=e=>e.account.wasLoggedInBefore,_=e=>e.account.disabledSaveGames,k=e=>e.account.source,A=e=>e.account.avatar,v=(0,o.Mz)(A,(e=>Boolean(e.eyes||e.bodyShape||e.color))),L=e=>e.account.username,B=e=>e.account.showNotificationBubble,P=(0,s.Z0)({name:"account",initialState:{status:null,session:null,flow:null,isPanelVisible:!1,source:null,wasLoggedInBefore:!1,disabledSaveGames:[],hasPasskeySupport:!0,username:null,avatar:{bodyShape:null,color:null,eyes:null},showNotificationBubble:!1},reducers:{toggleAccountPanel:(e,a)=>{e.isPanelVisible=!e.isPanelVisible,e.source=a?.payload?.source||null;const t=e.isPanelVisible?"hidden":"auto";document.body.style.overflow=t,!e.isPanelVisible&&window.frames?.gameFrame?.postMessage&&window.frames.gameFrame.postMessage?.({type:"pokiAccountsAuthPanelClosed"},"*")},setAccountSource:(e,a)=>{e.source=a.payload.source},setWasLoggedInBefore:e=>{e.wasLoggedInBefore=!0},setFlow:(e,a)=>{let t=a.payload.flowData;const o=(e=>e.account.hasPasskeySupport)({account:e});t=(0,f.py)(t),o||(t=(0,f.rn)(t)),e.flow=t},setDisabledSaveGames:(e,a)=>{e.disabledSaveGames.includes(a.payload.gameID)||e.disabledSaveGames.push(a.payload.gameID)},setHasPasskeySupport:(e,a)=>{e.hasPasskeySupport=a.payload.hasPasskeySupport},setAvatar:(e,a)=>{e.avatar={...e.avatar,...a.payload.avatar}},setAccountUsername:(e,a)=>{e.username=a.payload.username},setShowNotificationBubble:(e,a)=>{e.showNotificationBubble=a.payload.showNotificationBubble}},extraReducers:e=>{e.addCase(n.sx.fulfilled,((e,a)=>{const t=a.payload;e.session=t,e.status=200})),e.addCase(n.sx.rejected,(e=>{e.session=null,e.status=401}))}}),{toggleAccountPanel:D,setFlow:E,setWasLoggedInBefore:G,setHasPasskeySupport:I,setDisabledSaveGames:C,setAccountUsername:N,setAvatar:O,setAccountSource:F,setShowNotificationBubble:M}=P.actions;(0,u.Zv)({actionCreator:n.sx.fulfilled,effect:(e,a)=>{const t=a.getState(),o=y(t),s=o?.identity?.is_first_login,i=o?.identity?.id||"unknown",d=o?.authentication_method||"unknown",c=new URL(window.location.href).searchParams.get("accountSource");a.dispatch(G()),a.dispatch(m.lh.endpoints.getProfile.initiate({})).then((e=>{const t=e?.data;t?.username&&a.dispatch(N({username:t.username}))})),s?((0,p.F)({category:"account",action:"registerSuccess",label:d,data:{accountId:i,source:c}}),a.dispatch((0,n.jE)())):(0,p.F)({category:"account",action:"loginSuccess",label:d,data:{accountId:i,source:c}})}}),(0,u.Zv)({actionCreator:n.sx.rejected,effect:async(e,a)=>{const t=await(0,f.ec)();a.dispatch(I({hasPasskeySupport:t})),(0,p.F)({category:"account",action:"hasPasskeySupport",label:t?"true":"false"})}});let H=null;(0,u.Zv)({matcher:(0,s.i0)(n.sx.fulfilled,n.sx.rejected),effect:(e,{unsubscribe:a})=>{window.addEventListener("message",(e=>{if("pokiAccountsGetUserInfo"===e?.data?.type){if(null===H){const e=window.store?.getState();if(!e)return console.error("No store found to get account state"),void window.frames?.gameFrame?.postMessage?.({type:"pokiAccountsUserInfo",enabled:!1,session:null},"*");H=y(e)}window.frames?.gameFrame?.postMessage?.({type:"pokiAccountsUserInfo",enabled:!0,session:{id:H?.id||""}},"*")}})),a()}}),(0,u.Zv)({type:d.SG.type,effect:(e,{getState:a,dispatch:t,unsubscribe:o})=>{o();const s=a(),n=(0,l.fn)(s),d=h(s),c=n.includes("flow="),u=n.includes("id="),p=n.includes("trigger_registration="),f=n.includes("accountSource=");if((c||p)&&!d){let e="url";p&&f&&(e=new URLSearchParams(n).get("accountSource")),t(D({source:e}))}if(u){const e=(0,r.K)(s).search_broken,a=new URL(window.location.href);a.searchParams.delete("id"),window.history.replaceState({},document.title,a.toString()),t((0,i.Gg)({notification:{title:e,clickOutsideToClose:!0,autoExpire:8e3}}))}}}),(0,u.Zv)({actionCreator:n.sx.fulfilled,effect:(e,a)=>{const t=a.getState(),o=v(t);a.unsubscribe(),o?a.dispatch(M({showNotificationBubble:!1})):(a.dispatch((0,c.oK)({tooltip:{id:"avatarBuilder",consumerId:"userAvatar",htmlContent:"<strong>Customization available.</strong><p>Try it out in your account.</p>",showCloseButton:!0,muteAfterClose:!0}})),a.dispatch(M({showNotificationBubble:!0})))}});const x=P}}]);
//# sourceMappingURL=client~main-423f78fa~6de924a4a50ed77b6ba1.js.map